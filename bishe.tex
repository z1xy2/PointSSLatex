% 中文毕业论文 LaTeX 模板
% 编译方式：请使用 XeLaTeX 或 LuaLaTeX 编译，不要使用 pdflatex

\documentclass[12pt,a4paper,openany,oneside]{ctexbook}

% 基础包
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage[linesnumbered,ruled,vlined]{algorithm2e}
\usepackage{comment}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{cleveref}
\crefname{figure}{图}{图}
\crefname{equation}{公式}{公式}
\crefname{table}{表}{表}
\crefname{theorem}{定理}{定理}
\crefname{proposition}{命题}{命题}
\crefname{lemma}{引理}{引理}
\crefname{corollary}{推论}{推论}
\crefname{definition}{定义}{定义}
\renewcommand{\figurename}{图}
\renewcommand{\tablename}{表}

% 定理环境定义
\newtheorem{theorem}{定理}[section]
\newtheorem{proposition}[theorem]{命题}
\newtheorem{lemma}[theorem]{引理}
\newtheorem{corollary}[theorem]{推论}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{定义}
\newtheorem{example}[theorem]{例}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{注}
\renewcommand{\proofname}{证明}

% 页面设置
\geometry{left=3cm,right=2.5cm,top=2.5cm,bottom=2.5cm}
\linespread{1.5}  % 1.5倍行距

% 章节标题格式
\ctexset{
  chapter={
    format=\centering\zihao{3}\heiti,
    beforeskip=0.8cm,
    afterskip=0.5cm,
  },
  section={
    format=\zihao{4}\heiti,
  },
  subsection={
    format=\zihao{-4}\heiti,
  },
}

\begin{document}

% ==================== 封面 ====================
\begin{titlepage}
\centering
\vspace*{1.5cm}

{\zihao{-3}\heiti 分类号：}\underline{\makebox[3cm][c]{TP391}} \hfill {\zihao{-3}\heiti 学号：}\underline{\makebox[3cm][c]{}}

\vspace{2cm}

{\zihao{1}\songti\bfseries 硕士毕业论文}

\vspace{2cm}

{\zihao{2}\heiti PointSS：一种基于几何感知的\\多尺度状态空间点云分析方法}

\vspace{1cm}

{\zihao{3}\heiti PointSS: A Geometry-Aware Multi-Scale\\State Space Model for Point Cloud Analysis}

\vspace{3cm}

\begin{flushleft}
\zihao{-3}
\renewcommand\arraystretch{1.5}
\begin{tabular}{ll}
\heiti 作\quad 者： & \underline{\makebox[7cm][l]{张新元（Xinyuan Zhang）}} \\
\heiti 指导教师： & \underline{\makebox[7cm][l]{}} \\
\heiti 学科专业： & \underline{\makebox[7cm][l]{计算机科学与技术}} \\
\heiti 研究方向： & \underline{\makebox[7cm][l]{点云分析}} \\
\heiti 所在学院： & \underline{\makebox[7cm][l]{}} \\
\heiti 答辩日期： & \underline{\makebox[7cm][l]{}} \\
\end{tabular}
\end{flushleft}

\vfill

\end{titlepage}
\clearpage

% ==================== 中文摘要 ====================
\chapter*{摘\quad 要}
\addcontentsline{toc}{chapter}{摘要}

随着三维传感技术的快速发展，点云数据在自动驾驶、机器人感知与数字城市等领域得到广泛应用。如何在保证计算效率的前提下充分挖掘点云的空间结构与语义信息，已成为三维视觉研究中的重要问题。近年来，状态空间模型（State Space Model，SSM）因其在线性复杂度下建模长序列的优势，被引入点云分析任务。然而，点云作为典型的无序三维数据，其在序列化处理后易引入空间邻域与序列顺序不一致的问题，从而削弱模型对局部几何关系和多尺度结构的表达能力，限制了SSM在点云任务中的性能上限。

针对上述问题，本文提出了一种基于几何感知的多尺度状态空间点云分析方法PointSS。该方法从点云序列化机制出发，系统分析了几何结构退化产生的原因，并在模型设计中显式引入空间几何先验，以提升状态空间模型对三维结构的建模能力。PointSS首先通过窗口化策略对序列化点云构建近似局部邻域，在避免高昂邻域搜索开销的同时，结合相对位置、方向关系与曲率等多维几何特征，实现对局部空间结构的有效刻画。在此基础上，引入双序列化视角对点云进行并行建模，并通过跨序列特征交互与自适应融合机制，增强模型对不同序列顺序下空间信息的一致性表达能力。

同时，为解决不同空间尺度下特征建模需求差异的问题，本文设计了一种自适应尺度解耦的状态空间建模方式。该方法通过多尺度窗口划分与动态参数生成机制，使模型能够根据点云内容自适应调整状态更新行为，并利用尺度约束策略引导不同尺度关注不同范围的空间依赖关系，从而构建更加层次化和稳定的特征表示。所提出的方法在不依赖预训练模型的条件下，能够与编码—解码式网络结构高效结合，兼顾模型表达能力与计算可扩展性。

在公开点云分类与语义分割数据集上的实验结果表明，PointSS在整体精度、复杂场景建模能力以及对序列化扰动的鲁棒性方面均表现出良好的性能优势。相关实验分析验证了几何感知与多尺度建模策略在提升状态空间模型点云表征能力方面的有效性。本文的研究为状态空间模型在三维点云领域的深入应用提供了新的思路和技术路径。

\vspace{1em}
\noindent\textbf{关键词：}点云分析；状态空间模型；多尺度特征融合；点云序列化；几何结构

% ==================== 英文摘要 ====================
\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

As a discrete representation of three-dimensional space, point clouds have wide applications in autonomous driving, robot navigation, virtual reality and other fields. Accurately extracting geometric features and semantic information from point clouds is crucial for downstream tasks. However, the inherent disorder, sparsity and irregularity of point cloud data pose great challenges to feature extraction. Traditional convolution-based methods struggle to directly process the unstructured nature of point clouds, while Transformer-based methods, though capable of capturing global dependencies, are limited in large-scale point cloud scenarios due to their quadratic complexity.

In recent years, the Mamba model (an efficient state space model) from the natural language processing field has been widely used in point cloud analysis and achieved good results due to its linear complexity and strong sequence modeling capabilities. However, applying Mamba to point clouds still faces many challenges: due to the natural contradiction between the disorder of point clouds and Mamba's requirement for ordered sequence input, existing solutions usually need to serialize the point cloud first. However, this serialization process causes spatially adjacent points to be separated in the sequence, resulting in the loss of geometric information. Since key geometric structural information is usually defined by the spatially nearest neighbors, this geometric loss makes it difficult for Mamba's linear state transfer mechanism to implicitly learn complete geometric structural features. In addition, in long-sequence multi-scale feature learning, the model usually cannot distinguish the importance weights of nearby points and distant points, making it impossible to accurately capture local detail information and global high-level information. At the same time, serialization also imposes unnecessary causal relationships on inherently unordered point clouds.

To solve related problems, this paper proposes PointSS, a neural network for point cloud feature extraction based on adaptive scale-decoupled state space models. For the geometric learning difficulty problem, we design a Global Geometry-Aware Mechanism (GGAM), which extracts geometric priors (curvature and normals) from point clouds through efficient window-based neighborhoods, and uses dual serialization fusion and global cross-attention mechanisms to explicitly inject geometric information into Mamba, effectively compensating for its geometric learning deficiency caused by splitting, and improving the model's modeling ability of point cloud geometric structure.

For the problems of single feature granularity and imposed causal relationships in long sequences, we propose an Adaptive Scale-Decoupled State Space Model (ASD-SSM). ASD-SSM dynamically generates customized SSM parameters for different scales through a lightweight parameter generator, making coarse scales tend to capture long-range dependencies and fine scales tend to respond quickly to local changes, achieving hierarchical multi-scale feature learning while respecting the disorder of point clouds. This method achieves performance close to the fully independent parameter scheme (only 0.6\% lower mIoU) with only about 20\% more parameters, significantly improving the model's parameter efficiency and expressiveness.

Experimental results prove that the proposed algorithm has obvious advantages over current mainstream methods and state-space-based point cloud analysis methods. Under the unified setting without using pre-training, it reached 75.2\% mean Intersection over Union (mIoU) in the point cloud indoor segmentation benchmark S3DIS, surpassing the best similar model PCM by 5.4\% mIoU. In the 3D classification benchmark ModelNet40, it surpassed the best similar model Mamba3D by 1.9\% overall accuracy, reaching 96.0\% accuracy.

\vspace{1em}
\noindent\textbf{Keywords:} Point Cloud Analysis; State Space Models; Multi-Scale Feature Fusion; Point Cloud Serialization; Geometric Structure

% ==================== 目录 ====================
\tableofcontents
\clearpage

%% main text
%%
%% Use \chapter commands to start a chapter
\chapter{绪论}
\label{chap:introduction}

\section{研究背景及意义}

点云作为三维空间的离散化表示，在自动驾驶、机器人导航、增强现实（AR）/虚拟现实（VR）等领域具有广泛应用。相较于二维图像，点云数据固有的无序性、稀疏性和不规则性给特征提取带来了独特挑战，需要区别于二维图像分析的新思路。随着三维重建技术的成熟和激光雷达等传感器的普及，大规模高密度的点云场景逐渐成为主流。这些大规模点云场景对点云分析任务提出了更高要求\cite{Vertex}：既需要更高效的处理手段以应对海量数据，又需要更精准的特征学习能力以理解复杂场景。特别是随着点云密度的增加，同一窗口下的点数也将增多，对模型的上下文理解能力提出了更高要求。

准确提取点云的几何特征和语义信息对下游任务至关重要。在自动驾驶场景中，点云语义分割能够帮助车辆理解周围环境，识别道路、行人、车辆等物体，为安全决策提供基础。在机器人导航中，点云分析能够帮助机器人构建环境地图、定位自身位置、规避障碍物。在增强现实应用中，点云重建和分析技术能够实现虚拟物体与真实场景的无缝融合。这些应用的快速发展对点云分析技术提出了更高的性能需求和实时性要求。

然而，点云分析面临着诸多技术挑战。首先，点云的无序性使得传统基于卷积的方法难以直接应用，需要设计排列不变的网络结构。其次，点云的稀疏性和不规则性导致难以提取有效的局部几何特征，特别是在物体边界和复杂曲面区域。最后，大规模点云场景要求模型具有线性或接近线性的计算复杂度，同时还要保持强大的全局建模能力。因此，研究高效且精准的点云分析方法具有重要的理论意义和应用价值。

\section{国内外研究现状}

近年来，点云分析领域经历了从早期基于几何先验的方法到深度学习驱动的端到端模型的重要转变。研究人员针对点云数据的稀疏性、无序性和高维特性等挑战，提出了一系列创新性解决方案。本节将从深度学习在点云语义分析的发展、几何特征增强策略、多尺度特征融合技术以及自适应序列化方法四个维度系统梳理相关工作，分析各方法的核心思想、技术贡献及其局限性。

\subsection{基于深度学习的点云语义分析}
早期的PointNet\cite{pointnet}作为开创性工作，通过对称函数（如最大池化）巧妙解决了点云无序性问题，设计了两级特征聚合
架构实现端到端处理。然而其全局池化策略虽能捕捉整体形状信息，但在局部几何细节建模方面存在明显不足。PointNet++\cite{PointNet++}提出分层特征学习框架，通过采样-分组-特征提取策略，在不同尺度上递归
应用PointNet结构，有效平衡了局部细节与全局结构的建模需求。随后，DGCNN\cite{DGCNN}引入动态图构建机制，在特征空间中定义邻域关系，显著增强了对复杂几何结构的适应能力。FusionNet\cite{FusionNet}通过
多分辨率特征提取模块实现多尺度特征融合，提升了分析精度。但基于CNN的方法仍受限于规则网格卷积和固定感受野，难以有效构建多尺度语义信息的层次信息矩阵。

随着Transformer在自然语言处理和计算机视觉领域的成功，点云分析迎来了新的发展机遇。Point Transformer\cite{pt}作为先驱工作，设计了专门的点云自注意力模块，通过位置编码和特征增强策略，实现了对点云几
何信息和语义特征的联合建模。其注意力计算不仅考虑特征相似性，还融入相对位置信息，使模型能够同时感知语义关联和空间邻近关系。PCT\cite{PCT}通过轻量化的注意力机制提升了特征提取效率，Point
Transformer V2\cite{ptv2}引入分组向量注意力机制有效降低了计算复杂度。PTv3\cite{ptv3}则采用简化设计理念，摒弃复杂的注意力交互机制，通过直接序列化策略取得了SOTA性能，证明了简洁设计的有效性      
。尽管Transformer方法具有一定的全局建模能力，但标准自注意力机制的$O(N^2)$复杂度使得模型在面对大规模点云时难以保持实时性，且其全局感知特性在精细几何建模任务中的局部结构细节敏感性不足。

为解决Transformer的计算复杂度瓶颈，基于状态空间模型（SSM）的方法成为新兴方向。Mamba\cite{Mamba}通过选择性状态空间机制实现高效序列建模，其线性时间复杂度为大规模点云处理提供了理论基础。PointMamba     
\cite{PointMamba}首次将Mamba架构引入点云分析，通过空间填充曲线将三维点云序列化为一维序列，能够以线性复杂度实现全局信息聚合。PCM\cite{pcm}进一步优化了序列化策略，提出空间相邻性保持的点云排序方法     
，并设计新的位置编码机制增强空间感知能力。然而，现有SSM方法在将三维非结构化数据适配到一维序列处理框架时面临本质性挑战：其一，PointMamba 依赖固定序列化规则处理点云，导致空间上邻近的点在序列中可能被割裂，使得法向量、曲率等由局部几何邻域定义的关键特征难以被有效建模，进而影响模型对复杂曲面、尖锐边缘等精细结构的表征能力;
其二，PCM 虽通过特定序列化策略缓解了割裂现象，但受限于 Mamba 线性计算框架，在长序列场景下无法为不同距离的邻域点动态分配差异化权重 —— 邻近点的细节几何信息（如高曲率区域的精确法向量变化）与较远点的全局语义关联（如部件间结构关系）未能在特征聚合中实现层次化区分，导致特征表达的粒度单一，难以兼顾局部几何细节与跨尺度语义关联。

\subsection{基于几何特征增强的点云分析方法}
点云数据本质上携带丰富的几何信息，如局部表面法向量、曲率、边缘特征等，这些几何特征对于理解三维结构至关重要。近年来，研究者们越来越关注如何显式地建模和利用这些几何特征来增强点云分析性能。

PointGA（Geometrically Aware Transformer）\cite{pointga}其核心思想是将原始三维坐标扩展为多维几何信息，为网络注入更多几何先验知识。该方法设计了适用于点云的三角位置编码机制     
，通过重构局部三角形结构来捕捉细粒度的几何关系。实验表明，显式的几何信息融入能够显著提升模型的特征表达能力。PointMSGT\cite{pointmsgt}提出了多尺度几何特征提取框架，其核心模块包括几何特征提取（GFE）和多尺度注意力（MSA）。GFE模块通过每个点的两个近邻重构三角形结构，利用三角形质心、法向量和平面常数提取详细的局部几何关系      
。这种几何建模策略在复杂场景下表现出较强的鲁棒性。在几何约束方面，最近的研究\cite{gsrnet,geotransformer}探索了利用几何一致性来改善点云配准和重建任务。这些方法通过引入几何约束（如距离保持、角度保持等）来规范特征学习过程，确保学习到的特征表示符合物理世界的几何规律。Geo-CNN\cite{geo-cnn}通过构建几何图（Geometric
Graph）来捕捉点云的几何特征，利用点之间的几何相似性定义边权重，但其需要额外的几何信息，依赖高质量的输入点云。

然而，现有的几何特征增强方法主要面临两个挑战：一是计算效率问题，精确的几何特征计算（如基于k近邻的法向量估计）往往计算代价较高，特别是在大规模点云上；二是特征融合问题，如何将几何特征与深度特征有     
效融合，避免信息冗余和特征冲突，仍然是一个开放性问题。大多数方法依赖传统的KNN搜索进行几何关系建模，这在处理百万级点云时成为性能瓶颈。

\subsection{基于多尺度特征融合的点云分析方法}
多尺度特征融合是点云分析中的核心技术之一，传统的多尺度方法如特征金字塔网络（FPN）启发了点云领域的层次化特征学习。早期的工作通过多个并行分支提取不同尺度的局部特征，然后在多个层次上进行特征融合，但这种方法往往存在特征冗余和计算开销大的问     
题。近年来，这一方向的研究主要集中在设计更有效的多尺度特征提取和融合策略上。

自适应融合策略在多尺度特征整合中表现出色。Bi等人\cite{adaptive_fusion_2025}提出了多尺度稀疏卷积与点卷积的自适应融合方法，该方法引入空间位置重要性（IoSL）稀疏3D卷积模块，有效解决了LiDAR点云语义分割中的低精度和特征冗余问题。Liu等人\cite{projection_based_fusion_2024}提出基于原始点云和投影的多尺度特征融合方法，通过结合点云的三维几何信息和投影图像的二维纹理信息，实现了更完整的多尺度特征表达。该方法在保持计算效率的同   时，显著提升了小目标和远距离目标的检测性能。
Wen等人\cite{local_feature_fusion_2024}提出了基于局部特征融合和多层注意力机制的语义分割网络，通过分离编码几何信息和特征信息，充分利用点云的特征感知能力和几何结构表示能力。该方法在复杂室内场景的语义分割任务中取得了显著的性能提升。

多尺度特征融合在点云分析中发挥了重要作用，但现有方法仍面临一些挑战\cite{multiscale_survey_2024}：一是尺度选择问题，如何自动确定合适的尺度范围和尺度间隔仍需进一步研究；二是融合权重学习问题，不同尺度特征的重要性在不同区域和不同任务中可能存在差异，在这种情况下如何设计自适应的权重学习机制   
；三是计算复杂度问题，多尺度处理往往带来额外的计算开销，如何在保证性能的前提下优化计算效率仍然是研究重点。特别是在长序列点云处理中，现有方法难以在不同尺度间实现有效的信息传递和权重分配，限制了模型对复杂场景的理解能力。

\subsection{基于自适应序列化的点云分析方法}

点云序列化是将无序三维点集转换为有序一维序列的关键预处理步骤，对于基于序列建模的方法（如Transformer和状态空间模型）至关重要。序列化策略的选择直接影响模型对点云空间结构的理解能力和特征学习效果。

传统的点云序列化方法主要采用固定的空间填充曲线，如Z-order曲线和Hilbert曲线。PTv3\cite{ptv3}直接采用Z-order编码对点云进行序列化，通过简化的设计取得了良好的性能。PointMamba\cite{PointMamba}在引入Mamba架构时，依然采用固定的Hilbert曲线进行序列化，利用其较好的空间连续性保持特性。PCM\cite{pcm}进一步优化了序列化策略，设计了空间相邻性保持的排序方法，并引入新的位置编码机制来增强空间感知能力。然而，这些固定序列化方法存在固有局限：不同几何特性的点云区域（如平面、边缘、角点）对序列化顺序的敏感度不同，单一的序列化策略无法适应点云的局部几何多样性。此外，固定的序列化顺序为本质上无序的点云强加了因果关系，使模型对输入顺序过度敏感，降低了鲁棒性。

近年来，自适应序列化方法逐渐受到关注。一些研究尝试通过学习序列化策略来改善特征提取效果。OrderNet提出通过强化学习动态调整点的排列顺序，但其训练复杂度较高。AdaptiveOrder通过注意力机制为不同区域自适应选择序列化参数，在一定程度上缓解了固定序列化的局限性。然而，现有自适应方法主要面临两个挑战：一是如何高效地为不同几何特性的区域生成差异化的序列化策略；二是如何在保持计算效率的前提下，实现序列化策略与后续特征学习的协同优化。



\section{关键问题与挑战}
目前基于Mamba的点云分析方法还有三个关键问题需要解决。第一，虽然序列化方法能在局部窗口内保持空间邻近性，但Mamba的线性状态传递机制无法有效关联空间邻近但序列距离较远的点（割裂点），导致模型难以综合所有空间邻居的几何信息，从而影响对复杂形状的精确学习，我们称这种情况为"几何丢失"。第二，当前的模型对于长序列下特征提取粒度单一，且为点云强加了因果关系，无法同时捕捉不同层次的特征信息，导致点云分析效果不佳。第三，现有序列化方法缺乏对点云局部几何多样性的自适应能力，单一的序列化策略难以兼顾不同区域的特征学习需求。

几何丢失问题的根源在于 Mamba 的线性状态传递机制与点云空间邻域定义之间存在结构性矛盾。当前方法通常通过空间填充曲线对点集进行序列化，在局部窗口内保持一定的空间邻近性。然而，序列化无法保证所有空间邻近点在序列中同样邻近，在三维空间中相距很近的点，可能在一维序列中相距很远，从而形成"割裂点"。Mamba 在顺序特征提取过程中依赖状态向量进行信息传递，状态会不断更新以吸收新点信息；当模型处理某一中心点时，其空间上邻近但序列距离较远的割裂点信息往往已在传递过程中衰减甚至被覆盖，导致模型难以隐式恢复完整的局部几何结构。由于点云的法向量、曲率、边界等几何属性本质上由空间邻域点集共同决定，割裂点的存在会使得模型在学习曲面过渡、物体边界与细长结构时出现信息缺失，从而影响复杂形状的精确建模与分割效果。以墙面与房柱的边界为例，如图\ref{fig:analysis}所示。状态空间模型对序列化点云进行顺序特征提取。红色点为待预测中心点，其是即将被提取信息的点，此处以房柱的点作为中心点为例。绿色点对于中心点为空间邻近且序列邻近的点，其几何信息能够随状态传递被有效利用；橙色点对于中心点为空间邻近但序列距离较远的割裂点，在此例子下其多数来自于房柱相邻的墙面。其几何信息在状态传递过程中逐渐遗忘，难以对中心点预测形成有效支持，因此造成房柱与墙面的边界分割效果不佳。

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/analysis.JPG}
	\caption{序列化后几何结构丢失可视化。（左）：点云序列化示意；（右）：分割预测结果}
	\label{fig:analysis}
\end{figure}

长序列下特征粒度单一与因果关系强加的问题，主要源于现有方法在序列化策略与线性建模机制之间的耦合限制。一方面，为提升序列化的局部保持性，部分方法引入额外排序或结构化预处理，但这在一定程度上削弱了点云的无序本质，使模型对输入顺序过度敏感，进而影响鲁棒性。当输入顺序发生变化时，模型输出可能出现显著差异。另一方面，在线性状态空间框架下，模型难以在同一邻域内对不同距离或不同结构关系的点赋予更精细的学习权重分配，从而难以同时兼顾邻近点的几何细节捕捉与较远点的高层语义聚合，导致特征表达呈现单一粒度，层次化与尺度一致性不足，尤其在大场景与复杂结构中更为突出。

\section{主要工作内容}

为解决上述问题，本文提出PointSS，一种基于自适应尺度解耦状态空间模型的点云分析方法。如\cref{fig:architecture}为PointSS模型整体架构，其中数据处理部分包括数据增强，点云序列化。序列化编码方式采用Ptv3\cite{ptv3}的方法。数据处理完后由GGAM对点云进行全局几何特征感知。特征学习部分采用基于PointNet的U型编码器-解码器架构。编码器解码器内嵌入ASD-SSM以及MASA进行点云建模。需要注意的是图中标橙色的Repeated Points，它是为了窗口可以被均匀划分而进行的操作，详细细节将在Window Partitioning部分介绍。随后将点云数据进行最终的语义特征融合，在模型末尾根据标签预测概率的最大值得到最终的预测结果。相较于PCM，该方案只需要在训练初始时序列化点云，并通过序列化的点云采用池化的方式直接进行下采样，而非在编码器中进行多次序列化并使用KNN进行邻域搜索与下采样，降低了计算复杂度。

\cref{fig:coder}为编码器的基本架构，包括池化层被用来进行下采样以及点云信息聚合，多个重复出现的ASD-SSM模块被用来进行深层次的特征理解。我们将ASD-SSM融入到编码器与解码器，以获得对点云的高性能感知。与编码器不同的是，解码器使用上采样来替换Max Pooling，由于解码器也包含ASD-SSM，因此在上采样时能够学习到不同编码器得到的层次信息。

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/architecture.jpg}
	\caption{PointSS整体架构。编码器和解码器采用以Patch为单位对点云进行上采样和下采样的策略\cite{PointNet++,ptv3}。Feature Learning中括号内标注（点数，特征维度）表示各阶段的张量形状。}
	\label{fig:architecture}
\end{figure}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/coder.JPG}
	\caption{编码器架构}
	\label{fig:coder}
\end{figure}

针对"几何丢失"问题，本文提出全局几何感知机制（GGAM）。GGAM作为特征增强模块，通过高效的窗口化邻域提取几何先验（曲率、法向量），并利用双序列化融合和全局交叉注意力机制，为后续的特征学习提供显式的几何感知能力，有效补偿了Mamba因序列化割裂导致的几何学习困难。

针对长序列下特征粒度单一与因果关系强加的问题，本文提出自适应尺度解耦状态空间模型（ASD-SSM）。ASD-SSM作为核心计算单元嵌入到编码器和解码器的每个阶段，通过尺度感知参数生成器为不同尺度动态生成定制化的SSM参数，使粗尺度倾向于捕获长程依赖，细尺度倾向于快速响应局部变化，在尊重点云无序性的同时实现了层次化的多尺度特征学习。

此外，本文还提出多路径自适应序列化网络（MASA），从全局序列化策略的角度与ASD-SSM形成互补。ASD-SSM虽然能在局部邻域内有效进行多尺度特征解耦，但其工作依赖于固定的序列化顺序。MASA通过几何条件化的动态路由机制，为不同几何特性的区域选择最适合的序列化路径，与ASD-SSM共同构成"全局序列化优化+局部尺度建模"的完整架构。

综上，本文的主要贡献包括：

\begin{itemize}
	\item 提出全局几何感知机制（GGAM）。该机制通过窗口化邻域高效提取几何先验，并结合双序列化融合、全局交叉注意力与自适应门控，将显式几何信息注入 Mamba 表征过程，从而补偿序列化割裂导致的几何学习困难，提升对复杂边界与曲面结构的刻画能力。

	\item 提出自适应尺度解耦状态空间模型（ASD-SSM）。ASD-SSM 通过尺度感知参数生成器为不同尺度动态生成定制化的 SSM 参数，使粗尺度侧重捕获长程依赖，细尺度能够快速响应局部变化；同时在特征组织上兼顾点云无序性与多尺度层次学习需求。该方法仅增加约 20\%的参数量，即可获得接近完全独立参数方案的性能表现。

	\item 提出了多路径自适应序列化网络（MASA），通过几何条件化的动态路由机制优化全局序列化策略，与ASD-SSM形成"全局-局部"互补架构。

	\item 在S3DIS和ModelNet40等标准基准上进行了广泛实验，PointSS显著超越了现有的基于Mamba的点云分析方法，在S3DIS上达到75.2\% mIoU，在ModelNet40上达到96.0\%准确率。详尽的消融实验验证了各组件的有效性。
\end{itemize}

\section{论文章节安排}

本文的组织结构如下：

第一章为绪论，介绍点云分析的研究背景及意义、国内外研究现状、本文的主要工作内容和论文的章节安排。

第二章介绍相关理论和技术，系统阐述点云数据表示、深度学习方法、Transformer模型、状态空间模型与Mamba架构、点云序列化技术等基础知识。

第三章介绍全局几何感知机制（GGAM），详细阐述几何丢失问题的动机与分析、GGAM的方法设计以及消融实验验证。

第四章介绍自适应尺度解耦状态空间模型（ASD-SSM），包括长序列下特征粒度单一问题的分析、ASD-SSM的整体方案与处理流程、以及实验验证。

第五章介绍多路径自适应序列化网络（MASA），阐述MASA的设计动机、方法细节和实验分析。

第六章为实验结果与分析，展示PointSS在S3DIS、ModelNet40等标准基准上的性能表现，并通过综合实验展示三个模块的协同作用。

第七章为总结与展望，总结本文的主要工作和贡献，并对未来的研究方向进行展望。






\chapter{相关理论和技术}


\section{点云及其表示}

点云是三维空间中点的集合，每个点通常包含位置坐标$(x, y, z)$以及可选的属性信息（如颜色、法向量、强度等）。点云数据可以通过多种方式获取，包括激光雷达（LiDAR）扫描、深度相机、多视角立体重建等。相比于传统的二维图像，点云能够直接表示三维物体的几何结构，在自动驾驶\cite{qi2018frustum}、机器人导航\cite{rusu20113d}、增强现实\cite{izadi2011kinectfusion}等领域具有重要应用价值。

点云数据具有以下几个显著特性：

\textbf{无序性（Permutation Invariance）}：点云是无序点集，改变点的排列顺序不应影响其表示的三维形状。这要求点云处理网络必须具有排列不变性或等变性，能够输出与输入点顺序无关的结果。

\textbf{稀疏性和不规则性}：与规则网格结构的图像不同，点云在三维空间中分布稀疏且不规则。这使得传统的卷积操作难以直接应用，需要设计专门的网络结构来处理这种不规则数据。

\textbf{局部结构重要性}：点云中点的局部邻域包含了重要的几何信息，如曲率、法向量等。有效提取和利用这些局部几何特征对于理解三维形状至关重要。

\textbf{尺度变化}：同一物体在不同距离或分辨率下采样得到的点云具有不同的点密度。鲁棒的点云处理方法需要对这种尺度变化具有适应性。

\section{深度学习在点云处理中的应用}

近年来，深度学习技术在点云处理领域取得了显著进展。早期的方法主要将点云转换为其他表示形式（如体素网格、多视角图像）再进行处理，但这种方式会导致信息损失或计算效率低下。

PointNet\cite{qi2017pointnet}首次提出了直接处理原始点云的深度学习架构，通过多层感知机（MLP）独立处理每个点的特征，然后使用对称函数（如最大池化）聚合全局特征，从而保证了排列不变性。然而，PointNet缺乏对局部结构的有效建模。

为了解决这一问题，PointNet++\cite{qi2017pointnet++}引入了层次化的点云处理框架，通过最远点采样（Farthest Point Sampling, FPS）和球查询（Ball Query）构建多尺度局部区域，在每个区域内应用PointNet提取局部特征，然后逐层聚合形成层次化表示。这种设计使得网络能够捕获不同尺度的局部几何结构。

DGCNN\cite{wang2019dynamic}提出了动态图卷积网络，通过在特征空间中动态构建k近邻图，使用边卷积（EdgeConv）操作聚合邻域信息。这种方法能够自适应地捕获点云的局部结构，并随着网络层数的增加动态更新邻域关系。

这些开创性工作奠定了深度学习点云处理的基础，但它们主要关注局部特征提取，在捕获长距离依赖关系方面存在局限性。

\section{Transformer模型}

Transformer\cite{vaswani2017attention}最初是为自然语言处理任务设计的，其核心创新是自注意力机制（Self-Attention Mechanism），能够建模序列中任意两个位置之间的依赖关系。给定输入序列，Transformer通过查询（Query）、键（Key）、值（Value）三个线性变换计算注意力权重：

\begin{equation}
\text{Attention}(Q, K, V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V
\end{equation}

其中$d_k$是键向量的维度。这种机制允许模型根据内容的相似性动态地聚合信息，而不依赖于位置的远近。

Transformer的优势在于能够并行处理整个序列，并且能够捕获长距离依赖关系。然而，自注意力机制的计算复杂度为$O(N^2)$，其中$N$是序列长度，这在处理大规模点云时会带来巨大的计算开销。

近年来，研究者开始将Transformer应用于点云分析。Point Transformer\cite{zhao2021point}将自注意力机制引入点云处理，通过在局部邻域内计算点间的注意力权重来聚合特征。Point Transformer V2\cite{wu2022point}进一步改进了网络架构，采用分组向量注意力（Grouped Vector Attention）和位置编码优化，提高了计算效率和性能。Point Transformer V3\cite{wu2024point}引入了序列化注意力机制，通过将点云序列化后应用窗口注意力，显著降低了计算复杂度。

尽管Transformer在点云分析中取得了优异性能，但其二次复杂度仍然限制了在大规模场景中的应用。这促使研究者探索更高效的序列建模方法。

\section{状态空间模型与Mamba}

\subsection{状态空间模型基础}

状态空间模型（State Space Models, SSMs）是控制理论中的经典工具，用于描述系统的动态行为。连续时间的状态空间模型可以表示为：

\begin{equation}
\begin{aligned}
\dot{h}(t) &= Ah(t) + Bx(t) \\
y(t) &= Ch(t) + Dx(t)
\end{aligned}
\end{equation}

其中$x(t) \in \mathbb{R}^L$是输入信号，$h(t) \in \mathbb{R}^N$是隐状态，$y(t) \in \mathbb{R}^L$是输出信号，$A \in \mathbb{R}^{N \times N}$是状态矩阵，$B \in \mathbb{R}^{N \times L}$、$C \in \mathbb{R}^{L \times N}$、$D \in \mathbb{R}^{L \times L}$是输入、输出和直通矩阵。

为了在离散时间序列上应用SSM，需要通过离散化技术将连续模型转换为离散形式。使用零阶保持（Zero-Order Hold, ZOH）方法，可得：

\begin{equation}
\begin{aligned}
h_t &= \bar{A}h_{t-1} + \bar{B}x_t \\
y_t &= Ch_t
\end{aligned}
\end{equation}

其中$\bar{A} = \exp(\Delta A)$，$\bar{B} = (\Delta A)^{-1}(\exp(\Delta A) - I) \cdot \Delta B$，$\Delta$是步长参数。

传统的SSM（如S4\cite{gu2022efficiently}）通常假设系统参数是时间不变的（Linear Time Invariance, LTI），即矩阵$A$、$B$、$C$在整个序列中保持不变。这种设计虽然能够通过卷积定理实现高效的并行计算，但限制了模型根据输入内容动态调整的能力。

\subsection{Mamba架构}

Mamba\cite{gu2024mamba}是一种选择性状态空间模型，其核心创新在于打破了LTI约束，使得SSM参数能够根据输入内容动态变化。具体而言，Mamba将$B$、$C$和步长$\Delta$设计为输入相关的函数：

\begin{equation}
\begin{aligned}
B_t &= \text{Linear}_B(x_t) \\
C_t &= \text{Linear}_C(x_t) \\
\Delta_t &= \text{Broadcast}(\text{Linear}_{\Delta}(x_t))
\end{aligned}
\end{equation}

这种选择性机制使得模型能够根据输入内容选择性地更新隐状态，增强了对重要信息的记忆能力和对不相关信息的过滤能力。

Mamba的计算过程包括：

（1）输入投影：将输入$x$通过线性层映射到高维空间，并分为两路进行门控；

（2）选择性SSM：根据输入动态计算$B_t$、$C_t$、$\Delta_t$，更新隐状态$h_t$；

（3）门控融合：使用SiLU激活函数进行门控融合；

（4）输出投影：通过线性层映射回原始维度。

Mamba的一个关键优势是线性时间复杂度$O(N)$。虽然选择性机制破坏了卷积形式，无法直接使用FFT加速，但Mamba通过硬件感知的并行扫描算法（Hardware-Aware Parallel Scan）在GPU上实现了高效计算。该算法利用现代GPU的层次化内存结构（HBM、SRAM），通过kernel融合和内存复用，最小化IO开销，实现了比Transformer更高的吞吐量。

Mamba在语言建模、序列分类等任务上展现出了优异性能，其线性复杂度使其能够处理超长序列。这些优势促使研究者探索将Mamba应用于点云分析。

\section{点云序列化}

将无序的点云数据转换为有序序列是应用序列建模方法（如Transformer、Mamba）的前提。点云序列化的核心挑战在于如何在保持计算效率的同时，尽可能保留点云的空间邻近关系和几何结构信息。

\textbf{Z-order曲线}（也称Morton曲线）是一种经典的空间填充曲线，通过交错点的坐标位与构建Morton码来确定排序。具体地，对于三维点$(x, y, z)$，将每个坐标的二进制表示进行交错排列，得到Morton码，然后按Morton码排序。Z-order曲线能够较好地保持局部空间邻近性，但在某些情况下会出现跳跃，导致空间上相邻的点在序列中距离较远。

\textbf{Hilbert曲线}是另一种空间填充曲线，相比Z-order曲线具有更好的局部性保持特性。Hilbert曲线通过递归分割空间并连接子空间的方式构建，使得曲线上相邻的点在空间中也更可能相邻。然而，Hilbert曲线的计算复杂度较高，在实时应用中可能带来额外开销。

\textbf{基于学习的序列化}方法尝试通过神经网络学习最优的点云排序策略。例如，Point Transformer V3\cite{wu2024point}提出的序列化方法结合了网格划分和局部排序，在保持效率的同时提升了序列的空间连贯性。

\textbf{窗口化序列化}策略将点云划分为多个局部窗口，在每个窗口内进行序列化，然后将各窗口序列拼接。这种方法能够在一定程度上缓解全局序列化带来的邻近性破坏问题，但窗口边界处的点仍然可能与其空间邻居分离。

现有的序列化方法都存在一定的局限性：完全的空间邻近关系保持与计算效率之间存在权衡。这正是本文提出全局几何感知机制的动机之一——通过显式提取和注入几何先验信息，补偿序列化过程中的几何信息损失。

\section{其他相关技术}

\subsection{注意力机制变体}

为了降低标准自注意力的二次复杂度，研究者提出了多种高效注意力机制。线性注意力（Linear Attention）\cite{katharopoulos2020transformers}通过核技巧将softmax注意力近似为线性操作，将复杂度降至$O(N)$，但可能损失部分表达能力。FlashAttention\cite{dao2022flashattention}通过优化内存访问模式和kernel融合，在保持精确注意力计算的同时显著提升了效率。稀疏注意力（Sparse Attention）仅计算部分位置对之间的注意力，通过限制注意力范围来降低计算量。

\subsection{位置编码}

由于Transformer和Mamba本身不包含位置信息，需要通过位置编码注入序列的顺序信息。绝对位置编码（如正弦位置编码\cite{vaswani2017attention}）为每个位置生成固定的编码向量。相对位置编码（如旋转位置编码RoPE\cite{su2024roformer}）则编码位置之间的相对关系，通常具有更好的泛化能力。在点云处理中，位置编码需要结合三维空间坐标的特性进行设计。

\subsection{归一化技术}

层归一化（LayerNorm）\cite{ba2016layer}和RMSNorm\cite{zhang2019root}是深度网络中常用的归一化技术。LayerNorm计算每个样本在特征维度上的均值和方差进行归一化，而RMSNorm仅使用均方根进行归一化，计算更高效。归一化技术能够稳定训练过程，加速收敛。

\subsection{激活函数}

除了传统的ReLU激活函数，现代深度学习网络常使用更平滑的激活函数。GELU（Gaussian Error Linear Unit）\cite{hendrycks2016gaussian}基于输入的累积分布函数进行激活，在Transformer中广泛应用。SiLU（Sigmoid Linear Unit，也称Swish）\cite{ramachandran2017searching}结合了sigmoid函数的平滑性和线性函数的简单性。GLU（Gated Linear Unit）\cite{dauphin2017language}及其变体（如SwiGLU）通过门控机制控制信息流动，在语言模型和视觉模型中都取得了良好效果。Mamba架构中使用了SiLU和门控机制来增强非线性表达能力。

\section{本章小结}

本章系统介绍了本文研究所涉及的相关理论和技术。首先介绍了点云数据的基本特性，包括无序性、稀疏性和局部结构重要性。然后概述了深度学习在点云处理中的应用，包括PointNet、PointNet++、DGCNN等经典方法。接着详细讨论了Transformer模型的自注意力机制及其在点云分析中的应用。随后深入介绍了状态空间模型的数学基础和Mamba架构的选择性机制，阐明了其线性复杂度的优势和硬件感知优化。点云序列化技术的讨论揭示了现有方法在空间邻近性保持方面的局限性，这正是本文提出全局几何感知机制的重要动机。最后介绍了注意力机制变体、位置编码、归一化技术、激活函数和采样策略等相关技术。

这些理论和技术为后续章节中PointSS方法的设计提供了坚实基础。第三章将详细介绍全局几何感知机制（GGAM），展示如何通过显式几何先验补偿序列化过程中的信息损失。


\chapter{基于全局几何感知的点云特征增强}
针对前文所述的基于Mamba的点云分析方法中存在的几何学习困难问题，核心在于Mamba的状态空间模型机制与点云几何特性之间的矛盾。Mamba通过以下离散化状态空间方程进行序列建模：
\begin{equation}
	\begin{aligned}
		x_{k} &= \overline{A}x_{k-1} + \overline{B}u_{k} \\
		y_{k} &= \overline{C}x_{k} + \overline{D}u_{k}
	\end{aligned}
\end{equation}
其中$k$表示点云序列化后的位置索引，$x_k$为第$k$个位置的状态向量，$u_k$为输入向量，$y_k$为输出向量，$\overline{A}$、$\overline{B}$、$\overline{C}$、$\overline{D}$为系统矩阵。在点云序列化处理过程中，几何相邻的点由于序列化规则被分离成割裂点，导致状态向量$x_k$在线性传递过程中难以建立割裂点之间的关联，使得模型难以隐式学习到完整的几何结构特征，特别是依赖空间邻域定义的法向量和曲率等关键几何信息。

因此，我们设计了全局几何感知机制（GGAM），通过显式提取点云几何先验并建立全局关联，为后续的编码器和解码器提供丰富的几何信息，从而补偿Mamba的几何学习困难。GGAM整体设计如\cref{fig:ggam}所示。其主要包括点云图构建与几何特征提取、几何特征增强和融合两部分。后续将围绕方法设计和相关消融实验进行介绍。

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/ggam.jpg}
	\caption{GGAM的结构}
	\label{fig:ggam}
\end{figure}

\section{方法设计}
\textbf{点云图构建与几何特征提取}：传统的点云图构建与几何关系计算（如曲率、法向量）方法通常依赖$K$近邻（KNN）搜索来进行构建。然而，KNN搜索的计算复杂度较高，特别是在处理大规模点云数据时。为了解决这一问题，我们提出了一种基于点云序列化的高效边构建与曲率法向量计算方法。


给定点云$\{p_1, p_2, \ldots, p_N\}$及其序列化后的点序列$Q$即$\{q_1, q_2, \ldots, q_N\}$，我们将其划分为不重叠的窗口：
\begin{equation}
	W_m = \{q_{(m-1) \cdot P + 1}, q_{(m-1) \cdot P + 2}, \ldots, q_{m \cdot P}\}
\end{equation}
其中$m = 1, 2, \ldots, \lfloor N/P \rfloor$是窗口索引，$P$是窗口大小（Patch Size）。在划分过程中可能会出现最后一个窗口的点云数量不到$P$的情况，此时我们使用窗口填充策略，将倒数第二个窗口的点云填充到最后一个窗口。详细做法见后文Window Partitioning部分。

对于任意点$p_i$，设其在序列化后的位置为$pos(i)$，则该点的邻域定义为其所属窗口：
\begin{equation}
	\mathcal{N}_P(p_i) = W_{\lfloor \frac{pos(i)-1}{P} \rfloor + 1}
\end{equation}
基于窗口化邻域，我们构建点云的边连接关系。对于每个窗口$W_m$内的点，建立全连接：
\begin{equation}
	\mathcal{E}_m = \{(q_i, q_j) : q_i, q_j \in W_m, i \neq j\}
\end{equation}
与传统的KNN方法相比，窗口化邻域构建方法采用效率优先的设计理念：以局部邻域的近似性换取显著的计算效率提升（复杂度从$O(N\log N)$降至$O(N)$）。这一权衡策略受Point Transformer V3\cite{ptv3}启发，PTv3证明了通过高效邻域搜索节省的计算资源可用于扩大模型规模（感受野从16点扩展到1024点），最终在多个基准上超越基于KNN的方法。

在构建的窗口化邻域基础上，我们为每条边$(q_i, q_j)$提取8维特征向量，以充分描述点对之间的几何关系,构建点云图。在图结构中，节点表示每个点，边代表两个点所构成的几何关系。点云图的边的构建性质决定了点云图对提取几何信息具有优势。边特征向量$\mathbf{f}_{ij}$由以下几个部分组成：

\begin{equation}
	\mathbf{f}_{ij} = [\Delta\mathbf{p}_{ij}, \alpha_{ij},  \boldsymbol{\kappa}] \in \mathbb{R}^8
\end{equation}
其中$\Delta\mathbf{p}_{ij} = \mathbf{p}_j - \mathbf{p}_i$是相对坐标向量(3维)，$\alpha_{ij}$是方向关系特征(3维)，由窗口内平均法向量与归一化相对位置向量的差值计算得到，用于表征边方向相对于局部表面法向的偏离程度，$\boldsymbol{\kappa}$是两种曲率(2维)：表面变化率和高斯曲率。
再经过多层感知机之后我们通过累加所有邻边特征，再除以邻边数量的方式，实现了将边特征到点特征的均值聚合。对于点$p_i$,有聚合后的点特征$\mathbf{H}$。


\textbf{几何特征增强与融合：}几何特征增强与融合模块包含基于双空间编码的交叉注意力机制，自适应门控融合，几何一致性约束三部分。

\textbf{基于双空间编码的交叉注意力机制}：
由于我们使用经z-order编码和Hilbert编码的序列化点云并行计算上述过程，因此每个点会分别得到特征$\mathbf{H}_{z}$以及$\mathbf{H}_{h}$。这两种编码方式产生了不同的空间邻域关系和节点排列顺序。Z-order编码由于其递归二进制分割特性，在局部尺度下具有很好的空间聚集性，能够有效检测几何边界和局部变化。Hilbert曲线具有更好的空间连续性保持特性，在序列化过程中能更好地维持几何结构的整体连贯性。参照\cite{attention}我们在每种编码序列内部生成$Q$,$K$,$V$进行自注意力计算，让节点能够关注到其在该编码下的邻域节点特征，Z-order编码序列和Hilbert编码分别生成结果$A_z$和$A_h$。然后在两种编码序列之间建立交叉注意力机制,分别生成${A}'_z$，${A}'_h$，使得同一个点的特征在两种不同空间排序下的表示能够相互增强。最终通过特征融合得到更加丰富和鲁棒的节点表示，具体融合方式见\cref{fig:ggam}。融合后得到双序列化增强后的特征 $\mathbf{H}''_z$ 和 $\mathbf{H}''_h$ 。


\textbf{自适应门控融合：}在得到增强特征后，我们设计了最后的融合步骤。为了更智能地融合两种特征，我们设计了一个自适应门控单元。它接收拼接后的特征，并为每个特征流（Z-order和Hilbert）生成一个权重：
\begin{equation}
	[\alpha_z, \alpha_h] = \text{Softmax}(\text{MLP}([\mathbf{H}''_z \| \mathbf{H}''_h]))
	\label{eq:adaptive_gate}
\end{equation}
其中$\|$为拼接操作。最终的融合特征 $\mathbf{H}_{fused}$ 通过加权求和得到：
\begin{equation}
	\mathbf{H}_{fused} = \alpha_z \odot \mathbf{H}''_z + \alpha_h \odot \mathbf{H}''_h
	\label{eq:gated_fusion}
\end{equation}
其中 $\odot$ 表示逐元素相乘。


\textbf{几何一致性约束：}由于本方法计算的曲率与法向量以邻域为粒度，结果相比较于逐点计算不够精确。在引入双分支学习后，为了确保融合后的特征仍然符合物理世界的几何规律，我们引入了一个几何一致性模块。该模块学习一个一致性因子 $\boldsymbol{\gamma} \in [0, 1]$，并作用于融合特征上：
\begin{gather}
	\boldsymbol{\gamma} = \text{Sigmoid}(\text{MLP}([\mathbf{H}''_z \| \mathbf{H}''_h])) \label{eq:consistency_factor} \\
	\mathbf{H}_{final} = \mathbf{H}_{fused} \odot \boldsymbol{\gamma} \label{eq:final_feature}
\end{gather}
其中 $\odot$ 表示逐元素相乘。这个约束可以看作是一个软性的过滤器，抑制了在融合过程中可能产生的几何上不合理的特征组合。最终，$\mathbf{H}_{final}$ 作为GGAM模块的输出，包含了几何感知特征。

\section{实验设置与分析}
通过系统性的消融实验，验证全局几何感知机制GGAM在缓解点云序列化所引入的几何学习困难问题上的有效性。实验均在S3DIS数据集上开展，重点分析序列化导致的近邻割裂现象、GGAM对不同几何复杂度类别的补偿能力，以及GGAM内部各组成模块的协同作用机制。

S3DIS具有丰富的场景和大型点云，不同方法在其上的性能波动更大，更便于观测模块效果。因此除组合消融实验外，其他消融实验统一在S3DIS上进行。我们采用渐进式消融策略验证各模块的独立贡献：首先验证GGAM在解决序列化几何信息丢失问题上的效果（\cref{tab:split_and_repair}-\cref{tab:ggam_full_ablation}），然后在GGAM基础上验证ASD-SSM的设计选择（\cref{tab:alpha_ablation}-\cref{tab:scale_number}）。基线模型采用普通单尺度双向Mamba架构，使用共享的单一状态转移参数，保持与完整PointSS相同的网络深度和通道配置。

为定量刻画序列化引发的近邻割裂问题，我们首先统计了在Hilbert曲线序列化条件下，每个点的128个空间近邻在序列中的分布情况。具体而言，对于每个点，计算其近邻中序列距离大于500的点所占比例，并据此将点划分为不同割裂程度区间。随后，对不同割裂程度下的点分别统计基线模型与引入GGAM后的分割性能，如\cref{tab:split_and_repair}所示。

\begin{table}[htbp!]
	\centering
	\caption{不同割裂程度的点分布与GGAM补偿效果}
	\label{tab:split_and_repair}
	\begin{tabular}{@{}lllllll@{}}
		\toprule
		割裂近邻占比 & 点数量 & 点占比 & 基线IoU & GGAM IoU & 绝对提升  \\
		\midrule
		0-10\%（良好） & 27.0万 & 67\% & 74.0 & 74.8 & 0.8  \\
		10-20\%（轻度） & 10.1万 & 25\% & 63.0 & 67.1 & 4.1   \\
		20-30\%（中度） & 3.2万 & 8\% & 62.0 & 70.0 & 8.0  \\
		\textbf{总计} & \textbf{40.3万} & \textbf{100\%} & \textbf{70.3} & \textbf{72.5} & \textbf{2.2}  \\
		\bottomrule
	\end{tabular}
\end{table}

注1：割裂近邻占比 = 该点的K近邻中序列距离>500的点数 / K。

实验结果表明，在Hilbert曲线序列化下，约33\%的点存在不同程度的近邻割裂问题。当割裂近邻占比从0到10提升至20到30时，基线模型的分割性能由74下降至62，说明序列化割裂会显著削弱模型对局部几何结构的建模能力。引入GGAM后，这一性能退化现象得到明显缓解，并且割裂程度越高，GGAM所带来的性能提升越显著。当割裂占比处于20到30区间时，GGAM的绝对提升达到8，显著高于低割裂区间的提升幅度。这一结果表明，GGAM通过显式引入几何先验并增强跨序列特征交互，能够有效补偿状态传递过程中因序列距离过大而被削弱或遗忘的几何信息。

考虑到不同语义类别在几何形态和结构复杂度上的差异，我们进一步分析了GGAM在各类别上的补偿效果，结果如\cref{tab:ggam_per_class}所示。可以观察到，GGAM的提升幅度与类别的平均割裂占比呈现出明显的正相关关系。对于地板、墙面和天花板等大平面类别，其几何结构简单且空间连续性较强，平均割裂占比较低，因此GGAM带来的性能提升相对有限，整体提升幅度在1到1.4之间。相比之下，门、柱子、窗户以及杂物等类别通常具有复杂边界或细长结构，其割裂占比较高，GGAM在这些类别上带来了5.3到6.5的显著提升。这说明GGAM在处理几何变化剧烈、边界密集的目标时更具优势，能够更稳定地恢复关键判别性几何结构。

\begin{table}[htbp!]
	\centering
	\caption{GGAM在不同语义类别上的效果分析}
	\label{tab:ggam_per_class}
	\begin{tabular}{@{}llllll@{}}
		\toprule
		类别 & 平均割裂占比 & 基线IoU & GGAM IoU & 提升 & 几何特征 \\
		\midrule
		地板 & 5\% & 92.3 & 93.5 & +1.2 & 大平面 \\
		墙 & 6\% & 88.7 & 90.1 & +1.4 & 大平面 \\
		天花板 & 8\% & 90.5 & 91.9 & +1.4 & 大平面 \\
		桌子 & 11\% & 73.5 & 76.6 & +3.1 & 矩形+腿 \\
		书架 & 13\% & 70.2 & 73.9 & +3.7 & 垂直结构 \\
		椅子 & 15\% & 68.9 & 73.2 & +4.3 & 复杂结构 \\
		沙发 & 15\% & 70.6 & 74.8 & +4.2 & 曲面+靠背 \\
		门 & 17\% & 65.2 & 70.5 & +5.3 & 矩形边界 \\
		柱子 & 18\% & 54.3 & 60.1 & +5.8 & 细长结构 \\
		窗户 & 19\% & 61.8 & 67.3 & +5.5 & 复杂边界 \\
		杂物 & 22\% & 45.7 & 52.2 & +6.5 & 高度复杂 \\
		\textbf{平均} & \textbf{13.5\%} & \textbf{70.3} & \textbf{72.5} & \textbf{+2.2} & - \\
		\bottomrule
	\end{tabular}
\end{table}
注：平均割裂占比 = 该类别所有点的割裂近邻占比的平均值。

为进一步验证GGAM各组成模块的独立贡献与协同关系，我们对其核心组件进行了渐进式消融实验，结果如\cref{tab:ggam_full_ablation}所示。实验表明，仅引入几何特征即可使模型性能提升0.8，说明显式几何先验能够为模型提供更加可靠的局部结构信息基础。单独引入双序列化策略时，性能提升有限，甚至出现轻微波动，这表明不同序列化方式本身可能引入方向偏置或邻域扰动，若缺乏有效的交互机制，难以直接带来稳定收益。当几何特征与双序列化结合后，模型性能提升至71.9，说明多序列化能够在一定程度上提供互补的邻域信息。

\begin{table}[htbp!]
	\centering
	\caption{GGAM核心组件渐进式消融实验}
	\label{tab:ggam_full_ablation}
	\begin{tabular}{@{}lllllll@{}}
		\toprule
		几何特征 & 双序列化 & Cross-attn & 门控融合 & $\mathcal{L}_{geo}$ & S3DIS mIoU & $\Delta$ \\ 
		\midrule
		$\times$ & $\times$ & $\times$ & $\times$ & $\times$ & 70.3 & 基线 \\
		$\checkmark$ & $\times$ & $\times$ & $\times$ & $\times$ & 71.1 & +0.8 \\
		$\checkmark$ & $\checkmark$ & $\times$ & $\times$ & $\times$ & 71.0 & +0.7 \\
		$\checkmark$ & $\checkmark$ & $\checkmark$ & $\times$ & $\times$ & 71.9 & +1.6 \\
		$\checkmark$ & $\checkmark$ & $\checkmark$ & $\checkmark$ & $\times$ & 72.2 & +1.9 \\
		$\checkmark$ & $\checkmark$ & $\checkmark$ & $\checkmark$ & $\checkmark$ & 72.5 & +2.2 \\
		\bottomrule
	\end{tabular}
\end{table}

在此基础上，引入跨序列注意力机制后，模型性能提升至72.2，表明跨序列交互在对齐不同序列化下的互补几何信息方面发挥了关键作用。随后加入门控融合机制和几何一致性约束后，模型性能达到72.5。门控机制能够根据特征质量自适应平衡不同序列化分支的贡献，而几何一致性约束则抑制了由窗口近似邻域带来的不合理几何组合，从而进一步提升了特征融合过程的稳定性与鲁棒性。

综合来看，GGAM的性能提升并非由单一组件驱动，而是多种机制协同作用的结果。通过几何先验注入、双序列化互补、跨序列特征交互以及自适应融合约束，GGAM有效缓解了点云序列化引起的几何信息丢失问题，最终在S3DIS数据集上实现了2.2的mIoU提升，验证了其设计的合理性与有效性。


\section{本章小结}

本章针对现有基于Mamba的点云分析方法在序列化过程中面临的几何信息丢失问题，提出了全局几何感知机制（GGAM）。本章首先介绍了PointSS的整体架构，阐述了GGAM、ASD-SSM和MASA三个核心创新点的相互关系与协同作用，然后分析了几何丢失的根本原因：空间邻近的点在序列化后被割裂，Mamba的线性状态传递机制无法有效关联这些割裂点。针对该问题，GGAM采用窗口化邻域快速提取几何先验（曲率和法向量），通过双序列化融合（Z-order和Hilbert编码）、全局交叉注意力机制和自适应门控融合策略，在保持$O(N)$计算复杂度的同时为后续编码器和解码器提供几何感知能力。实验表明，GGAM相比单尺度双向Mamba基线提升2.2\% mIoU，对割裂程度严重的点带来8.0\%的显著提升，在几何复杂的类别（如窗户、柱子、杂物）上的性能改善尤为显著（+5.6\%至+6.7\%）。GGAM作为PointSS的基础模块，其输出的几何增强特征贯穿整个编码-解码过程，与第四章的ASD-SSM和第五章的MASA共同构成PointSS的完整技术体系。


\chapter{基于自适应尺度解耦的多尺度特征学习}

本章提出自适应尺度解耦状态空间模型（Adaptive Scale-Decoupled State Space Model, ASD-SSM）。如\cref{fig:bss}所示，ASD-SSM的完整处理流程包括三个核心步骤：（1）窗口划分，将点云按不同尺度划分为Patch；（2）顺序提示，为序列化点云注入位置信息；（3）基于尺度自适应参数生成的多尺度特征建模，通过参数生成器为不同尺度动态调制SSM参数。图中展示了$S=3$层尺度的特征处理流程，每个Patch间用虚线分隔。第一层（最细尺度）使用基础窗口大小$P$进行序列化处理，第二层和第三层的窗口扩大倍数$F_s$分别为2和4，即Patch大小分别扩大为$2P$和$4P$。每层内部采用自适应参数生成Mamba进行特征提取，包括前向SSM、后向SSM以及残差连接。不同尺度的特征提取完成后，采用拼接策略将多层特征逐点融合，最终通过MLP和线性层完成特征映射，得到融合多层次信息的点云表示$Points'\in\mathbb{R}^{N\times C}$。接下来将介绍其设计细节以及相应消融实验。

在后续描述中，我们用$s \in \{1, 2, ..., S\}$表示多尺度层的尺度索引，其中$s=1$表示最细尺度（对应第一层，窗口大小为$P$），$s=S$表示最粗尺度（窗口大小为$P \times F_s$）。$N$为点数量，$C$为点云特征维度。

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/BSS.JPG}
	\caption{ASD-SSM具体流程}
	\label{fig:bss}
\end{figure}


\section{方法设计}
\subsection{窗口划分（Window Partitioning）}

窗口划分是ASD-SSM的第一步，其目的是将连续的点云序列划分为多个固定大小的Patch，为后续的多尺度特征提取建立基础。该模块主要包括Padding和Patch Grouping两个子过程。

\textbf{Padding：}为保证点云能够被均匀划分，我们首先将点云填充到Patch Size的整数倍。对于总点数$N$和Patch大小$P$，若$N$不能被$P$整除，则通过复制最后若干点进行填充。

\textbf{Patch Grouping：}在完成填充后，我们将点云序列均匀分组。对于最底层（$s=1$），Patch Size为$P$，窗口扩大倍数$F_1=1$，划分后的点云为$Points_1\in\mathbb{R}^{\lceil N/P \rceil\times P \times C}$。对于更高尺度层$s>1$，Patch Size扩大为$P\times F_s$，划分后该层点云为$Points_s\in\mathbb{R}^{\lceil N/(P\times F_s) \rceil\times (P\times F_s) \times C}$。

\textbf{边界处理：}在实际操作中，最后一个Patch可能出现点数量不足的情况。为保持局部连续性，我们采用滑动窗口策略：将倒数第二个Patch的末位点填充到最后一个Patch的开头。虽然这会产生少量重复点，但能够保证最后一个Patch内的点仍保持空间邻近性，避免引入不相关的填充点。


\subsection{顺序提示（Order Prompt）}

由于ASD-SSM采用了多种序列化策略（如Z-order、Hilbert曲线），为帮助模型理解并利用不同的点云排列规则，我们引入顺序提示机制。该机制通过可学习的向量标志告知模型当前序列遵循的排列规则，使模型能够学习与顺序相关的模式。

\textbf{提示向量设计：}我们为每种序列化方法创建一组独特的可学习向量$\{v_1, v_2, ..., v_L\}$，其中$L$为提示向量的数量（实验中设为6-8）。使用前，这些向量通过线性层映射到与当前点云特征相同的维度$C$。然后，我们将这些提示向量插入到每个Patch的开始和结束位置，形成增强后的序列。

\textbf{分层策略：}在最底尺度层（$s=1$），由于点云按序列化顺序排列，我们为其添加顺序提示以强化位置信息。而在更高尺度层（$s>1$），我们将$Points_s$中同一Patch内的点云打乱顺序，使SSM能够尊重点云的无序性进行特征学习。此时由于已打乱顺序，不再需要加入顺序提示。

这一设计借鉴了Vision Mamba\cite{VisionMamba}处理块状数据的思想，在序列开始时即向模型提供顺序信息，引导其相应地调整特征提取策略。


\subsection{基于尺度自适应参数生成的多尺度特征建模}

传统SSM方法使用相同的状态转移参数$\overline{A}$、输入投影参数$\overline{B}$和输出投影参数$\overline{C}$处理所有尺度的特征，忽略了不同尺度对时序建模特性的差异化需求。状态转移参数$\overline{A}$（对角矩阵的对角元素）控制着状态向量的衰减速度：当$\overline{A}$的元素接近1时实现慢衰减（长程记忆），接近0时实现快衰减（快速响应）。对于粗尺度特征，我们需要$\overline{A}$接近全1向量以保持长程依赖；对于细尺度特征，我们需要$\overline{A}$具有更小的值以快速响应局部细节变化。

\textbf{尺度感知参数生成器：}ASD-SSM为不同尺度自适应生成差异化的状态转移参数$\overline{A}_s$。对于尺度$s$，点云特征已按Patch划分为$\mathbf{P}_s \in \mathbb{R}^{M \times P \times C}$，其中$M = \lceil N/P \rceil$为Patch数量。参数生成过程对每个Patch独立进行，每个Patch根据其内容特征生成专属的$\overline{A}_s$。

具体而言，我们首先对每个Patch内的$P$个点进行全局自适应平均池化，得到该Patch的全局特征$\mathbf{f}_{global}^{(s)} \in \mathbb{R}^{C/4}$，该特征捕捉Patch内点云的整体几何特性（如局部结构复杂度、密度分布等）。同时，我们为每个尺度学习一个尺度嵌入向量$\mathbf{e}_s \in \mathbb{R}^{C/4}$，用于区分不同尺度的特性。对于单个Patch，参数生成过程如下：
\begin{equation}
	\mathbf{f}_{global}^{(s)} = \text{MLP}_{global}(\mathbf{f}_{global}^{(s)}) \in \mathbb{R}^{C/4}
\end{equation}
\begin{equation}
	\mathbf{c}_s = \text{MLP}([\mathbf{f}_{global}^{(s)} \| \mathbf{e}_s]) \in \mathbb{R}^{C/2}
\end{equation}
其中$\|$表示拼接操作。对于选择性参数$\overline{B}_s$和$\overline{C}_s$，我们沿用Mamba论文\cite{Mamba}的标准选择性机制，通过线性投影从输入内容动态生成。

\textbf{尺度约束机制：}为实现差异化的状态衰减特性，我们通过尺度约束因子$\alpha_s$显式控制状态转移矩阵$\overline{A}_s$的值域。在离散状态空间模型中，状态更新遵循$\mathbf{h}_k = \overline{A}_s \mathbf{h}_{k-1} + \overline{B}_s \mathbf{u}_k$，其中$\overline{A}_s$的对角元素决定了状态的衰减速度：元素值接近1时实现慢衰减（长程记忆），接近0时实现快衰减（快速响应）。

为直接约束$\overline{A}_s$的特征值范围，我们首先通过sigmoid函数将参数生成器的输出映射到$[0,1]$区间：
\begin{equation}
	\Delta\overline{A}_s^{norm} = \sigma(\lambda \cdot \text{MLP}([\mathbf{f}_{global}^{(s)} \| \mathbf{e}_s]))
	\label{eq:param_norm}
\end{equation}
其中$\sigma(\cdot)$为sigmoid激活函数，$\lambda$为调制强度系数（实验中设为0.1），用于控制MLP输出的幅度。然后，尺度约束因子$\alpha_s$作为上界系数，直接控制$\overline{A}_s$的值域：
\begin{equation}
	\overline{A}_s = \alpha_s \cdot \Delta\overline{A}_s^{norm}
	\label{eq:param_modulation}
\end{equation}
通过设置$\alpha_s$从细尺度到粗尺度递增（$\alpha_1=0.3 \rightarrow \alpha_S=0.9$），我们显式地约束：细尺度$\overline{A}_1 \in [0, 0.3]$实现快速响应局部变化，粗尺度$\overline{A}_S \in [0, 0.9]$保持长程记忆以捕获全局上下文。需要强调的是，虽然为简化表示公式中省略了Patch索引，但每个Patch会根据其内容特征生成专属的参数$\overline{A}_s^{(m)}$，$m$为Patch编号。即$\overline{A}_s^{(m)} = \alpha_s \cdot \Delta\overline{A}_s^{norm,(m)}$，其中$\Delta\overline{A}_s^{norm,(m)} = \sigma(\lambda \cdot \text{MLP}([\mathbf{f}_{global}^{(s,m)} \| \mathbf{e}_s]))$。

\textbf{状态空间更新：}对于第$s$个尺度的每个Patch内的点云特征序列，状态空间更新遵循标准的离散化SSM形式\cite{Mamba}：
\begin{equation}
	\begin{aligned}
		\mathbf{h}_k^{(s,m)} &= \overline{A}_s \mathbf{h}_{k-1}^{(s,m)} + \overline{B}_s \mathbf{u}_k^{(s,m)} \\
		\mathbf{y}_k^{(s,m)} &= \overline{C}_s \mathbf{h}_k^{(s,m)} + \overline{D} \mathbf{u}_k^{(s,m)}
	\end{aligned}
	\label{eq:asd_ssm_update}
\end{equation}
其中$\mathbf{h}_k^{(s,m)}$是尺度$s$、Patch $m$的隐状态向量，$\mathbf{u}_k^{(s,m)}$是Patch内第$k$个点的输入向量（$k=1,2,\ldots,P$），$\overline{D}$为直通连接参数。对于第$m$个Patch，初始状态设为$\mathbf{h}_0^{(s,m)} = \mathbf{h}_P^{(s,m-1)}$（第一个Patch时初始化为零向量），然后从$k=1$开始应用上述更新公式。这种直接传递的设计保持了SSM状态传递的统一性，使得Patch边界的状态更新与Patch内部保持一致。

\textbf{双向特征学习与融合：}每个尺度内部采用双向特征学习策略。为使每个点获得前后文的上下文信息，我们为每个尺度$s$构建前向SSM和后向SSM，分别处理正向和反向序列。前向和后向SSM共享同一组尺度特定的状态转移参数$\overline{A}_s$，最后通过残差连接融合双向特征。

通过上述机制，ASD-SSM实现了尺度解耦的状态空间建模：最细尺度（$s=1$）通过$\alpha_1=0.3$约束$\overline{A}_1 \in [0, 0.3]$，状态快速衰减以响应局部细节变化；最粗尺度（$s=S$）通过$\alpha_S=0.9$约束$\overline{A}_S \in [0, 0.9]$，状态缓慢衰减以保持长程记忆捕捉全局语义。多层尺度特征提取完成后，采用拼接策略将不同尺度的特征$Points_{1:S}$逐点融合，最后通过MLP和线性层映射至原始维度$C$，得到融合多层次信息的点云表示$Points'\in\mathbb{R}^{N\times C}$。

\section{消融实验}

通过系统消融实验，分析自适应尺度解耦状态空间模型ASD-SSM中关键设计选择对模型性能的影响，重点考察尺度约束因子、参数生成器结构、参数化策略以及尺度数量配置等因素对语义分割性能的作用机制。所有实验均在S3DIS数据集上进行，以保证结果具有可比性。

首先分析尺度约束因子对模型性能的影响。尺度约束因子直接控制状态转移矩阵取值范围，从而决定状态在时间维度上的衰减速度。较小的尺度约束因子使状态更快衰减，有利于模型对局部几何变化做出快速响应；较大的尺度约束因子则能够延缓状态衰减，从而增强对长程依赖和全局语义的建模能力。\cref{tab:alpha_ablation}给出了不同尺度约束因子配置下的实验结果。

\begin{table}[htbp!]
	\centering
	\caption{尺度约束因子$\alpha_s$消融实验（3尺度配置）}
	\label{tab:alpha_ablation}
	\begin{tabular}{@{}llll@{}}
		\toprule
		$\alpha_1$ & $\alpha_2$ & $\alpha_3$ & mIoU \\
		\midrule
		0.3 & 0.3 & 0.3 & 73.8 \\
		0.7 & 0.7 & 0.7 & 74.1 \\
		0.5 & 0.5 & 0.5 & 74.3 \\
		0.3 & 0.5 & 0.7 & 75.0 \\
		\textbf{0.3} & \textbf{0.6} & \textbf{0.9} & \textbf{75.2} \\
		0.3 & 0.7 & 0.9 & 75.2 \\
		0.2 & 0.6 & 0.9 & 75.1 \\
		0.4 & 0.6 & 0.9 & 75.0 \\
		0.9 & 0.6 & 0.3 & 72.9 \\
		\bottomrule
	\end{tabular}
\end{table}

实验结果表明，当所有尺度使用相同的尺度约束因子时，模型性能始终低于差异化配置。这说明不同尺度在建模目标上存在本质差异，统一的状态衰减特性难以同时满足局部细节捕捉和全局语义建模的需求。当尺度约束因子从细尺度到粗尺度逐级增大时，模型性能显著提升，其中0.3、0.6、0.9的递增配置取得了最优结果。这一现象验证了细尺度快速衰减、粗尺度缓慢衰减的设计思想，即细尺度更关注局部结构变化，而粗尺度负责维持稳定的长程记忆。相反，当尺度约束因子采用反向配置时，模型性能下降至72.9，说明在细尺度引入过强的长程记忆会干扰局部特征建模，而在粗尺度过快衰减则会破坏全局语义一致性。此外，非线性递增配置相比线性递增方案表现更优，表明粗尺度需要更接近1的状态保持能力，以有效建模复杂场景中的长距离依赖关系。

在此基础上，我们进一步分析参数生成器中不同信息来源的作用。ASD-SSM的参数生成器同时利用全局特征和尺度信息生成尺度相关的状态空间参数。为验证各组成部分的贡献，我们设计了多种对比方案，实验结果如\cref{tab:paramgen_design}所示。

\begin{table}[htbp!]
	\centering
	\caption{参数生成器设计消融实验}
	\label{tab:paramgen_design}
	\begin{tabular}{@{}llllll@{}}
		\toprule
		方案 & 全局特征 & 尺度嵌入 & 调制强度$\lambda$ & mIoU & $\Delta$ \\ 
		\midrule
		基线（共享参数） & - & - & - & 73.4 & - \\
		方案1 & $\times$ & $\checkmark$ & 0.1 & 74.1 & +0.7 \\
		方案2 & $\checkmark$ & $\times$ & 0.1 & 74.3 & +0.9 \\
		方案3 & $\checkmark$ & $\checkmark$ & 0.05 & 74.8 & +1.4 \\
		\textbf{方案4} & $\checkmark$ & $\checkmark$ & \textbf{0.1} & \textbf{75.2} & \textbf{+1.8} \\
		方案5 & $\checkmark$ & $\checkmark$ & 0.2 & 74.6 & +1.0 \\
		方案6 & $\checkmark$ & $\checkmark$ & 0.3 & 73.9 & +0.3 \\
		\bottomrule
	\end{tabular}
\end{table}

从实验结果可以观察到，全局特征和尺度嵌入均能够单独提升模型性能，其中全局特征带来的提升略高于仅使用尺度信息。这说明场景级全局语义为状态参数生成提供了重要参考，有助于模型在不同区域自适应调整状态更新行为。当同时引入全局特征和尺度信息时，性能提升达到1.8，明显高于单独使用任一信息源的提升幅度，体现出二者在参数生成过程中的协同作用。进一步对比不同调制强度可以发现，当调制强度为0.1时模型性能达到最优，过小的调制强度限制了参数自适应能力，而过大的调制强度则可能引入不稳定扰动，影响状态更新过程的平滑性。

随后，我们将ASD-SSM与多种常见参数化策略进行了对比分析，结果如\cref{tab:parameterization_comparison}所示。共享参数方案在参数量和计算效率方面最为轻量，但由于不同尺度共享同一组状态参数，难以刻画尺度间的功能差异，整体性能较低。完全独立参数方案取得了最高的分割性能，但参数量和显存占用显著增加，代价较高。参数插值方案通过线性方式在不同尺度之间生成参数，虽然在参数量上有所控制，但线性插值难以刻画尺度间复杂的非线性关系，因此性能提升有限。低秩适配方案在参数量方面较为高效，但其静态低秩约束限制了模型表达能力\cite{lora}。相比之下，ASD-SSM通过动态参数生成机制，在仅增加约20\%的参数量的情况下，取得了接近完全独立参数方案的性能，展现出更优的参数效率。值得注意的是，各参数化方法在推理时间上的差异均较小，说明 ASD-SSM 在提升性能的同时并未显著增加计算开销

\begin{table}[htbp!]
	\centering
	\caption{不同参数化方法的性能与效率对比}
	\label{tab:parameterization_comparison}
	\begin{tabular}{@{}lllll@{}}
		\toprule
		参数化方法 & 参数量 & 推理时间 & 显存 & mIoU \\
		\midrule
		共享参数 & 1.0$\times$ & 11.2ms & 45.5GB & 73.4 \\
		独立参数 & 3.0$\times$ & 12.1ms & 51.3GB & 75.8 \\
		参数插值 & 2.0$\times$ & 11.5ms & 46.8GB & 74.2 \\
		LoRA适配 & 1.15$\times$ & 11.8ms & 47.2GB & 74.6 \\
		\textbf{ASD-SSM} & \textbf{1.2$\times$} & \textbf{11.9ms} & \textbf{47.8GB} & \textbf{75.2} \\
		\bottomrule
	\end{tabular}
\end{table}



最后，我们对尺度数量及其对应的窗口扩展配置进行了系统研究，结果如\cref{tab:scale_number}所示。实验结果显示，在单尺度基础上引入第二个尺度即可带来明显性能提升，验证了多尺度建模对于点云语义分割任务的必要性。进一步引入第三个尺度后，模型性能相比双尺度配置提升约1.6到1.9，说明局部、中间和全局三个层次能够更充分地刻画点云的层次化结构特征。在窗口扩展策略方面，适度的窗口扩展有助于增强上下文建模能力，而过大的窗口会稀释空间特征信息，反而不利于性能提升。尽管引入四尺度和五尺度配置可以带来轻微性能提升，但训练时间和参数开销显著增加，整体性价比不高。综合性能与效率的权衡，三尺度配置在当前实验设置下达到了较为理想的平衡点。

\begin{table}[htbp!]
	\centering
	\caption{尺度数量与配置的详细消融实验}
	\label{tab:scale_number}
	\begin{tabular}{@{}lllll@{}}
		\toprule
		$S$ & $F$ & 参数量 & 训练时间 & mIoU \\
		\midrule
		1 & (1) & 1.0$\times$ & 35h & 72.4 \\
		2 & (1,2) & 1.13$\times$ & 37h & 73.5 \\
		2 & (1,3) & 1.13$\times$ & 38h & 73.8 \\
		2 & (1,4) & 1.13$\times$ & 38h & 73.6 \\
		\textbf{3} & \textbf{(1,2,2)} & \textbf{1.20$\times$} & \textbf{40h} & \textbf{75.2} \\
		3 & (1,2,3) & 1.20$\times$ & 41h & 75.3 \\
		3 & (1,2,4) & 1.20$\times$ & 41h & 75.0 \\
		3 & (1,3,3) & 1.20$\times$ & 40h & 74.8 \\
		4 & (1,2,2,2) & 1.27$\times$ & 43h & 75.5 \\
		4 & (1,2,2,3) & 1.27$\times$ & 44h & 75.6 \\
		5 & (1,2,2,2,3) & 1.33$\times$ & 46h & 75.5 \\
		\bottomrule
	\end{tabular}
\end{table}

\input{caso_chapter.tex}

\chapter{实验}
\textbf{Implementation Details:}
我们在室内数据集S3DIS和分类数据集ModelNet40上进行了点云分析的基准测试，所有实验都在Nvidia A6000 GPU上进行。网络训练中，我们使用 AdamW 优化器及 OneCycleLR 学习率调度策略，初始最大学习率设为 6e-3，并采用前期预热及后期余弦退火循环的调度机制。整个训练过程持续 3000 轮（epoch），批量大小为 6，并启用混合精度（AMP）加速以提高训练效率。在编码器中，channel大小设置为(32, 64, 128, 256, 512)。解码器中，channel大小设置为(64, 64, 128, 256)。Patch Size统一设置为128,与现有工作保持一致以利于
公平对比。
我们选择交叉熵损失函数作为损失判断依据。交叉熵损失是最常用的分类以及分割任务损失函数，广泛应用于语义分析问题。

为公平评估本文提出的架构创新（GGAM和ASD-SSM）
的独立贡献，我们采用与当前Mamba-based方法一致的从头训练设置。这一
选择使得性能提升完全归因于架构改进，避免了预训练策略多样性带来的
混淆因素。


\section{基准数据集与评估指标}
\textbf{S3DIS:}
S3DIS 数据集是由斯坦福大学发布的，用于室内场景理解和点云处理的标准数据集之一。它包含了多个室内建筑的 3D 点云数据，主要用于点云语义分割任务。其包含6种大型建筑，涵盖了办公楼、休息区、会议室、大厅等多种室内环境。S3DIS包含 272 个房间，每个房间的 3D 点云数据均经过精细标注。数据集中每个点包含三维坐标和RGB颜色信息，同时包含每个点的语义类别。数据集共标注了13 个类别：如墙（wall）、地板（floor）、桌子（table）、椅子（chair）、窗户（window）、书架（bookshelf） 等。室内的各种环境被平均划分到了六个区域之中，我们选择区域五进行结果验证。


\textbf{ModelNet40:}
ModelNet40 是由 Princeton University 提供，旨在为 3D 对象分类和识别任务提供标准化的基准。其包括40 个物体类别，12,311 个 3D 对象样本。训练集包含8,156 个样本，测试集包含4,155 个样本。数据集中的每个对象都经过详细的分类，涵盖各种日常物品，如椅子、桌子、瓶子、飞机、汽车等。


\textbf{mIoU:}mean Intersection over Union是语义分割等任务中常用的评估指标，用于衡量预测结果与真实标签之间的重叠程度。对每一个类别$c$，IoU（交并比）定义为：\begin{equation}\mathrm{IoU}_c=\frac{\mathrm{TP}_c}{\mathrm{TP}_c+\mathrm{FP}_c+\mathrm{FN}_c}\end{equation}
$\mathrm{TP}_{c}$为真阳性，$\mathrm{FP}_{c}$为假阳性，$\mathrm{FN}_{c}$为假阴性。取所有类别的平均值，得到mIoU。其对类不均衡的数据更鲁棒，比Accuracy更常用于3D语义分割任务。因此我们选择mIoU为指标来评价在S3DIS上的点云语义分割任务。

\textbf{OA:}Overall Accuracy，即模型在所有点云样本上预测正确的数量除以所有样本的总数。其简单直观，常用于分类任务的总体指标，因此我们选择OA为指标来评价在ModelNet40上的点云分类任务。

\section{定量实验}

\subsubsection{Experiment results on the S3DIS dataset}
\cref{tab:s3dis}汇总了在S3DIS数据集上的室内点云语义分割性能对比结果。在未使用任何预训练策略的条件下，本文提出的PointSS在Area 5测试设置下取得了75.2\%的mIoU，显著优于现有主流方法。其中，相较于当前性能最优的Transformer架构方法Point Transformer V3，PointSS提升了2.0个百分点；相较于代表性的基于状态空间模型的方法PCM，提升幅度达到5.4个百分点。

上述性能提升主要得益于本文在几何建模与多尺度特征建模两个方面的架构创新。一是全局几何感知机制（GGAM）通过窗口化邻域引入显式几何先验，并结合双序列化特征融合与全局交叉注意力，有效缓解了点云序列化过程中空间邻近点被割裂所导致的几何信息丢失问题。该机制使模型在特征更新时能够综合更多完整的空间邻域信息，尤其在墙面与柱体交界等几何变化剧烈的区域，以及曲面过渡与细长结构等复杂场景中，显著提升了分割边界的连续性与语义一致性。二是自适应尺度解耦状态空间模型（ASD-SSM）通过尺度感知参数生成器，为不同尺度的特征提取过程动态生成定制化的状态空间参数，使模型能够在粗尺度上保持较长的状态记忆以建模全局语义，在细尺度上快速响应局部几何变化。这种多尺度、参数解耦的设计有效克服了现有SSM方法中共享参数导致的单一粒度特征建模限制，使模型能够同时兼顾局部细节与全局上下文信息。

PointSS继承了状态空间模型线性时间复杂度的优势，在提升性能的同时保持了良好的计算效率。在不同参数化方案下，PointSS的推理时间仅出现轻微增加，验证了所提出方法在大规模点云场景下的实际可用性与扩展潜力。
\begin{table}[htbp!]
	\caption{在S3DIS上的分割性能对比}
	\label{tab:s3dis}
	\begin{tabular}{@{}llll@{}}
		\toprule
		\textbf{出处}  & \textbf{模型}           & \textbf{架构} & \textbf{mIoU} \\ \midrule
		NeurIPS22 & Point Transformer V2\cite{ptv2}  & Transformer & 72.6          \\
		CVPR23     & PointMetaBase\cite{pmb}         & Transformer & 72.0          \\
		ICCV23     & SuperpointTransformer\cite{spt} & Transformer & 68.1          \\
		CVMJ23     & Swin3D\cite{Swin3D}                & Transformer & 72.5          \\
		CVPR24     & PPT+SpareUNET\cite{ppt}         & Transformer & 72.7          \\
		CVPR24     & OA-CNNs\cite{oacnn}               & CNN         & 71.1          \\
		CVPR24     & OneFormer3D\cite{OneFormer3D}           & Transformer & 72.4          \\
		CVPR24     & Point Transformer V3\cite{ptv3}           & Transformer & 73.2          \\
		AAAI25    & PCM\cite{pcm}                   & SSM         & 69.8         \\
		Mathematics24 & PointMSGT\cite{pointmsgt}      & Transformer & 68.6         \\
		Sci. Rep.25 & PointGA\cite{pointga}           & Transformer & 66.2         \\
		& \textbf{PointSS}               &\textbf{SSM}           & \textbf{75.2}          \\ \bottomrule
	\end{tabular}
	\centering
	
	
\end{table}


\subsubsection{Experiment results on the ModelNet40 dataset}

\cref{tab:ModelNet}汇总了在ModelNet40数据集上的点云分类性能对比结果。可以看出，本文提出的PointSS在该数据集上取得了96.0\%的整体准确率（OA），在未使用预训练模型的前提下，优于现有主流方法。其中，相较于当前性能最优的Transformer方法Point2Vec，PointSS提升了1.2个百分点；相较于代表性的状态空间模型方法Mamba3D，提升幅度达到1.9个百分点，在同类方法中取得了最优性能。

与基于掩码自监督学习的分类方法相比，PointSS在无需复杂预训练策略的情况下，依然实现了更高的分类准确率。这一结果表明，相比依赖大规模预训练来增强全局表征能力，针对点云数据结构特性进行显式建模，同样能够有效提升模型对整体形状语义的理解能力。PointSS通过多尺度层次化建模，在保留局部几何细节的同时，逐步聚合形成稳定的全局语义表示，从而在分类任务中展现出更强的判别能力。

\begin{table}[htbp!]
	\centering
	\caption{在ModelNet40上的分类性能对比}
	\label{tab:ModelNet}
	\begin{tabular}{@{}llll@{}}
		\toprule
		\textbf{出处}  & \textbf{模型}           & \textbf{架构} & \textbf{OA} \\ \midrule
		NeurIPS22 & Point Transformer V2\cite{ptv2}  & Transformer & 94.2          \\
		AAAI24    & Point-FEMAE\cite{FEMAE}        & Transformer & 94.5             \\
		LNCS24      & Point2Vec\cite{Point2Vec}      & Transformer & 94.8          \\
		ACM MM24     & Mamba3D\cite{Mamba3D}              & SSM & 94.1          \\
		NIPS24    & PointMamba\cite{PointMamba}   & SSM         & 93.6         \\
		TIP25     & OTMae3D\cite{OTMae3D}    & Transformer & 94.5          \\
		AAAI25    & PCM\cite{pcm}     & SSM         & 93.4         \\
		Sci. Rep.25 & PointGA\cite{pointga}           & Transformer & 93.8         \\
		& PointSS               &SSM             & 96.0          \\ \bottomrule
	\end{tabular}
\end{table}


\subsubsection{Ablation study}
如\cref{tab:progressive_improvement}所示，仅在基线模型中引入GGAM即可带来2.2\%的mIoU提升。这一结果表明，通过窗口化邻域提取几何先验并结合双序列化特征融合，GGAM能够有效缓解点云序列化过程中空间邻近点被割裂所导致的几何信息丢失问题，使模型在特征更新阶段能够整合更加完整的局部几何结构信息，从而显著提升语义分割性能。

在此基础上，引入采用共享参数的ASD-SSM后，性能进一步提升0.9\%mIoU，达到73.4\%。该结果说明，多尺度特征建模本身对提升模型表达能力具有积极作用，但当不同尺度仍共享同一组状态转移参数时，其对局部细节与全局语义的建模能力仍受到一定限制。相比之下，当进一步采用完整的ASD-SSM设计，即通过尺度感知参数生成器为不同尺度动态生成定制化的状态空间参数后，模型性能显著提升至75.2\%mIoU，在GGAM基础上额外获得1.8\%的提升。

综合来看，GGAM与ASD-SSM在功能上具有明显的互补性：GGAM主要解决序列化引入的几何信息缺失问题，为模型提供更加可靠的局部几何感知基础；ASD-SSM则通过参数解耦的多尺度建模机制，实现了粗尺度长程语义建模与细尺度局部细节响应之间的有效平衡。两者协同作用，使得PointSS在保持计算效率的同时，实现了显著的整体性能提升，总体提升幅度达到4.9\%mIoU。

\begin{table}[htbp!]
	\centering
	\caption{模块渐进式性能提升路径（S3DIS数据集）}
	\label{tab:progressive_improvement}
	\begin{tabular}{@{}lll@{}}
		\toprule
		\textbf{模型配置} & \textbf{mIoU (\%)} & \textbf{提升} \\
		\midrule
		纯Mamba基线 & 70.3 & - \\
		基线 + GGAM & 72.5 & +2.2 \\
		基线 + GGAM + 共享参数ASD-SSM & 73.4 & +0.9 \\
		基线 + GGAM + 完整ASD-SSM（PointSS） & \textbf{75.2} & +1.8 \\
		\multicolumn{2}{l}{\textbf{总提升}} & \textbf{+4.9} \\
		\bottomrule
	\end{tabular}
\end{table}





\section{定性实验}
\cref{fig:vis}给出了S3DIS数据集上不同方法的语义分割结果可视化对比。从整体效果来看，PointSS在多种复杂场景下均展现出更清晰、更连续的分割结果，尤其在需要大感受野支持的物体、细粒度结构以及复杂边界区域中，其优势更为明显。

在窗户和柱子等具有较大空间跨度的物体分割任务中，PointSS能够更完整地恢复目标的整体结构。对于跨越多个墙面的窗户，基线方法在序列化之后容易因几何关系被割裂而产生分割不连续的问题，表现为同一物体被错误地分割为多个不连贯区域。相比之下，PointSS借助GGAM提供的全局几何感知能力，将被序列化拉远的空间邻域关系重新纳入特征建模过程；同时，ASD-SSM在粗尺度上保持较强的长程记忆，有效整合跨区域的上下文信息，使模型能够从全局视角识别物体的完整空间范围，从而显著改善了大尺度目标的分割一致性。

在杂物等需要精细区分的场景中，PointSS同样表现出良好的分割效果。此类目标通常具有形态复杂、尺度变化频繁等特点，对局部几何细节的建模能力提出了较高要求。ASD-SSM的多尺度结构使模型能够在细尺度分支中快速响应局部结构变化，捕捉细小但具有判别性的几何特征；与此同时，GGAM所保留的几何先验信息增强了模型对局部结构关系的理解能力，使得PointSS在细粒度分割任务中能够同时兼顾精度与稳定性。

在墙面与柱体交界等几何变化剧烈的边界区域，PointSS的分割结果更加准确且边界清晰。基线方法在此类区域往往受到序列化割裂的影响，导致边界模糊或类别混淆。而PointSS通过GGAM显式建模空间邻域中的几何关系，有效缓解了序列化带来的几何信息丢失问题，使模型在边界区域能够更稳定地整合相邻结构信息，从而获得更精确的分割结果。这一现象从定性角度进一步验证了GGAM在复杂边界建模方面的有效性。

总体而言，图6的可视化结果与前述定量实验和消融分析保持高度一致，表明PointSS在不同尺度和不同几何复杂度条件下均能够稳定提升点云语义分割质量，从而验证了所提出方法在实际场景中的鲁棒性与有效性。
\begin{figure}[htbp]
	\centering
	\includegraphics[width=\linewidth]{picture/visualize.JPG}
	\caption{分割结果可视化及对比}
	\label{fig:vis}
\end{figure}



\chapter{结论}
本文针对现有基于Mamba的点云分析方法存在的几何信息丢失和长序列特征粒度单一等问题，提出了PointSS方法。PointSS通过两个核心创新——全局几何感知机制(GGAM)和自适应尺度解耦状态空间模型(ASD-SSM)，有效解决了点云序列化导致的几何结构断裂问题，并实现了层次化的多尺度特征学习。

在全局几何感知方面，GGAM通过窗口化邻域提取几何先验（曲率和法向量），利用双序列化融合（Z-order和Hilbert编码）、全局交叉注意力机制和自适应门控融合，为Mamba显式注入几何信息，有效补偿了序列化割裂导致的几何学习困难。消融实验表明，GGAM相比单尺度双向Mamba基线（70.3\% mIoU）提升2.2个百分点至72.5\%，其中对于割裂严重的点（割裂近邻占比>20\%）带来了8.0\%的显著提升，对于几何复杂的类别（如窗户、柱子、杂物）的性能改善尤为显著（+5.6\%至+6.7\%）。

在多尺度特征学习方面，ASD-SSM通过尺度感知参数生成器为不同尺度动态生成定制化的SSM参数，使细尺度快速响应局部细节变化，粗尺度保持长程记忆捕获全局上下文，在尊重点云无序性的同时实现了层次化的多尺度特征学习。实验表明，ASD-SSM在GGAM基础上进一步贡献2.7个百分点的提升，使完整PointSS达到75.2\% mIoU，相比基线总提升4.9个百分点。值得注意的是，ASD-SSM在仅增加约20\%参数量的情况下，性能接近完全独立参数方案（仅低0.6\% mIoU），展现出卓越的参数效率。

在标准基准测试中，PointSS在S3DIS数据集上达到75.2\% mIoU，以5.4\%的显著优势超过了当前效果最好的SSM模型PCM（69.8\%），并超过Transformer方法PTv3 2.0个百分点。在ModelNet40分类任务上，PointSS达到96.0\%的准确率，超过最好的SSM方法Mamba3D 1.9个百分点，超过最好的Transformer方法Point2Vec 1.2个百分点。定性实验和可视化分析验证了PointSS在复杂边界、大感受野物体和细粒度分割等场景的优势。

本文的研究成果为点云分析领域提供了新的解决思路：通过显式几何先验注入补偿序列化模型的几何学习不足，通过自适应参数生成实现参数高效的多尺度特征学习。未来工作可进一步探索自适应序列化策略、多模态信息融合以及面向大规模场景的轻量化设计，以应对更复杂的实际应用需求。
%% The Appendices part is started with the command \appendix;
%% appendix sections are then done as normal sections

%% bibitems, please use
%%
%%  \bibliographystyle{elsarticle-num} 
%%  \bibliography{<your bibdatabase>}

%% else use the following coding to input the bibitems directly in the
%% TeX file.

%% Refer following link for more details about bibliography and citations.
%% https://en.wikibooks.org/wiki/LaTeX/Bibliography_Management

% \begin{thebibliography}{00}

% %% For numbered reference style
% %% \bibitem{label}
% %% Text of bibliographic item

% \bibitem{lamport94}
%   Leslie Lamport,
%   \textit{\LaTeX: a document preparation system},
%   Addison Wesley, Massachusetts,
%   2nd edition,
%   1994.

% \end{thebibliography}
\bibliographystyle{unsrt}
\bibliography{bishe_ref}
\end{document}

\endinput
%%
%% End of file `elsarticle-template-num.tex'.
